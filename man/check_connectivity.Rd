% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analytics.r
\name{check_connectivity}
\alias{check_connectivity}
\title{Check Trial Network Connectivity}
\usage{
check_connectivity(data, genotype = "Genotype", trial = "Site", threshold = 10)
}
\arguments{
\item{data}{A dataframe containing the raw trial data.}

\item{genotype}{A character string. The column name for Genotype (default "Genotype").}

\item{trial}{A character string. The column name for Site/Environment (default "Site").}

\item{threshold}{Integer. The minimum number of shared lines required for a pair
to be considered "connected" (default 10). Pairs below this are flagged.}
}
\value{
A list containing:
\describe{
  \item{matrix_count}{The Site x Site connectivity matrix (counts of shared lines).}
  \item{matrix_pct}{The connectivity matrix as percentages (Jaccard Index).}
  \item{disconnects}{A dataframe listing specific site pairs that fell below the threshold.}
}
}
\description{
A critical pre-analysis diagnostic tool. It calculates the number of common
genotypes between every pair of environments in a dataset.

Factor Analytic models require genetic links (common lines) between trials to
estimate genetic correlations. If two sites share zero (or very few) varieties,
their correlation is undefined or unstable. This function flags such risks
**before** you attempt a computationally expensive ASReml run.
}
\details{
The function also generates a heatmap plot of the connectivity matrix immediately
upon execution to provide visual verification of the trial network structure.
}
